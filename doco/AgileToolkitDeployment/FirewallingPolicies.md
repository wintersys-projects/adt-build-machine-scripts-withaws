The firewalling of my solution here is one of its strongest points. With a bit of effort you can make it very hard for bad actors to attack your web properties. 

There are various configurations possible for the firewalling of your servers

1. In all cases you have to explicitly allow SSH access to your build machine for your laptop all other machines are denied access. Each machine that you want to allow access to your build machine has to be explicitly granted access.
2. Each of your actual server machines, autoscalers, database machine, and webservers can only be accessed via SSH from the build machine itself.
3. The autoscalers, webservers and database machines can all ssh onto each other and the database port can be accessed only from the autoscalers and webservers and from no other machines. 
4. The webserver ports, 443 and 80 can be configured for access in various ways:

   1. For regular DNS systems you can allow open access to port 443 and 80 from any machine. In such a case you will need to take steps o protect your webserver for example you can also use the gateway guardian mechanism.
	2. If you use cloudflare, you can firewall off all access to your origin servers except from cloudflare IP addresses (which the toolkit does automatically if you configure it to use cloudflare). 
	3. You can set up a registration server which is totally separate from your application server as described [here](https://github.com/wintersys-projects/adt-build-machine-scripts/blob/master/doco/AgileToolkitDeployment/RegistrationServer.md). This will mean that you application servers (webserver/autoscaler/database) are totally firewalled off except for the ip addresses that the registration server grants or requests access from. This is the most tied down method meaning that it would be very hard to hack.
	4. When you are in development mode and using regular DNS, you can use the provider you are using, (linode, digital ocean, exoscale, vultr or AWS) to manually configure access to your development machines only to the laptop machines that your developers are working on. Obviously, if your developers change the IP address of their laptop (by changing location, for example), then, you would need to keep on top of updating the firewall so that your developer's retain access to your development servers. 
   5. You might think this is overkill, but, I use double firewalling in other words, there is the native firewalling of the individual providers which I configure up and on the actual servers themselves, UFW is enabled as well. This double protection might be necessary in scenario 3 above because with some providers there are limits to the number of rules you can add which means if you had a website with a thousand users, if you wanted to add a thousand rules, one for each user's IP, then, you might hit hard limits. The way around this would be to add the thousand rules (using the toolkit) to the UFW system and in this way, allow connections through the native firewalling for all IP addresses with one rule but block all but the allowed ip addresses using UFW. I hope that is clear, the toolkit can be easily (according to me) modified to make this possible if I chose to.
	
	NOTE: I haven't done anything to implement registration servers or anything like that yet because I have been working on my own on this for the past few years and I want to get some feedback before I go any further with it. 
